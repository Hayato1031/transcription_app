# 技術要件定義書

## 1. プロジェクト概要
本プロジェクトは、React（Expo/React Native）を基盤とした音声認識・文字起こしアプリケーションです。ユーザーが録音した音声をテキストに変換し、さらに編集・保存・管理するための各種コンポーネントが実装されています。

## 2. 使用技術・フレームワーク
- **JavaScript / ES6+**
- **React / React Native**  
  - Expo の設定が存在（src/app.json により、Expo の設定やアプリのアイコン、スプラッシュ画面、Android のアダプティブアイコン、Web 用ファビコンが管理）
- **Babel**  
  - 設定は src/babel.config.js に記述
- **Node.js**  
  - package.json に依存関係等が記載されており、npm / yarn によるパッケージ管理

## 3. プロジェクト構成
以下、各ディレクトリ・ファイルの主要役割を列挙：

### 3.1. ルート直下
- **package.json, package-lock.json**  
  プロジェクトの依存関係、スクリプト、各種設定を管理
- **.gitignore**  
  バージョン管理から除外するファイル・ディレクトリを指定
- **README.md**  
  プロジェクト全体の概要、セットアップ手順、実行方法等のドキュメント（更新を推奨）
- **[その他のドキュメント]**  
  api-documentation.txt、demo.txt などの補助資料

### 3.2. src ディレクトリ内
- **src/app.json**  
  Expo の設定ファイル。以下の項目が定義されている：
  - アプリ名、スラッグ、バージョン
  - アプリのアイコン画像 (`"./assets/icon.png"`)
  - スプラッシュ画面 (`"./assets/splash-icon.png"`)
  - Android の adaptive icon (`"./assets/adaptive-icon.png"`)
  - Web 用 favicon (`"./assets/favicon.png"`)
  - その他、各プラットフォーム特有の設定（iOS のタブレット対応、Android 権限等）
  
- **src/index.js, src/App.js**  
  アプリのエントリーポイント。React コンポーネントやナビゲーションの初期化を担当

- **src/assets/**  
  画像等の静的リソースを格納。アプリのアイコン、スプラッシュ画面、その他のアイコン画像が配置

- **src/components/**  
  UIを構成する各種コンポーネントを管理。具体例：
  - **ControlButtons.js**: 録音や再生コントロール
  - **Header.js**: ヘッダー部分の UI
  - **LoadingIndicator.js**: 読み込み中の表示
  - **RecordingStatus.js**: 録音状態の表示
  - **SavedTranscriptions.js**: 保存済みの文字起こしの一覧表示
  - **SaveTranscriptModal.js**: 文字起こし保存用のモーダル
  - **Settings.js**: 各種設定（音質、言語、APIキー等の可能性あり）
  - **SideMenu.js**: サイドナビゲーション
  - **SpeakerRenameModal.js**: スピーカーの名前変更用モーダル
  - **TranscriptionDisplay.js**: 文字起こし結果の表示部

- **src/services/**  
  外部APIとの連携を担当するロジックが格納
  - **elevenlabsApi.js**: Eleven Labs API との通信処理（音声合成などが想定される）

- **src/utils/**  
  共通処理やヘルパー関数が配置される
  - **transcriptionUtils.js**: 文字起こしデータの加工、フォーマット変換等のユーティリティ

- **その他設定・環境ファイル**
  - **src/.env.example**: 環境変数のサンプルファイル（APIキー等の設定項目を含む可能性）

## 4. 機能要件
本アプリケーションが提供する主要な機能は以下の通りです：

### 4.1. 録音・文字起こし機能
- ユーザーが音声を録音し、録音状態を表示
- Eleven Labs API など外部サービスを用いて音声から文字起こしを実行
- 文字起こし結果を画面上に表示

### 4.2. テキスト表示・編集機能
- 文字起こし結果の表示（TranscriptionDisplay コンポーネント）
- 編集・保存機能
- 保存済みテキストの一覧表示（SavedTranscriptions コンポーネント）

### 4.3. ユーザーインターフェース
- ヘッダー、サイドメニューによるナビゲーション
- 各種モーダル（設定、スピーカー名の変更、保存確認など）の実装
- ローディングインジケータやエラーハンドリングの表示

### 4.4. プラットフォーム固有の設定
- Expo を利用した iOS / Android / Web 各プラットフォーム向けの設定
  - Android の adaptive icon、iOS のタブレット対応項目、Web の favicon 設定等

### 4.5. 環境設定とビルド
- Babel によるトランスパイル設定
- package.json による依存関係管理および各種 npm スクリプトの設定
- 環境変数の利用（.env.example を元に設定）

## 5. 非機能要件
- **パフォーマンス**: ユーザーインタフェースのレスポンス向上のため、必要に応じたコンポーネントの最適化を実施
- **スケーラビリティ**: 各コンポーネント、サービス、ユーティリティをモジュール化し、追加機能実装がしやすい構造とする
- **保守性**: コンポーネント単位の分離、共通処理のユーティリティ化による保守性の向上
- **プラットフォーム対応**: Expo の設定で iOS, Android, Web 各プラットフォームに対応
- **セキュリティ**: API呼び出しにおける認証・認可、環境変数での機密情報管理

## 6. 開発・デプロイのワークフロー
- **ローカル環境セットアップ**
  - Node.js, npm のインストール
  - `npm install` による依存関係のインストール
- **ローカル開発**
  - Expo を用いた起動: `expo start -c`
  - 自動リロード・ホットリロードによる迅速な開発サイクル
- **テスト・デバッグ**
  - 各コンポーネントの単体テストおよび統合テストの実施（必要に応じてテストフレームワークの導入検討）
- **ビルド・デプロイ**
  - Expo のビルドシステムを利用し、各プラットフォーム向けにビルド
  - ビルド後のキャッシュクリア、およびデバッグ確認

## 7. 今後の拡張
- **UI/UX の改善**: ナビゲーション、モーダル表示のユーザー体験向上
- **音声認識精度向上**: Eleven Labs API など外部音声認識サービスの評価と最適化
- **機能追加**: 録音・再生機能の強化、保存データのクラウド連携、セキュリティ強化

---
この要件定義書は、現時点のプロジェクト構造と実装を基に作成されています。今後、機能追加や設計の変更がある場合は、随時本書の更新が必要です。
